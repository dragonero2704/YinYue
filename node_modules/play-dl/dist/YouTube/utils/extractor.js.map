{"version":3,"file":"extractor.js","sourceRoot":"","sources":["../../../play-dl/YouTube/utils/extractor.ts"],"names":[],"mappings":"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","sourcesContent":["import { url_get } from './request'\r\nimport { format_decipher, js_tokens } from './cipher'\r\nimport { Video } from '../classes/Video'\r\nimport { PlayList } from '../classes/Playlist'\r\n\r\nconst DEFAULT_API_KEY = \"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8\";\r\nconst video_pattern = /^((?:https?:)?\\/\\/)?(?:(?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\-]+)(\\S+)?$/;\r\nconst playlist_pattern = /^((?:https?:)?\\/\\/)?(?:(?:www|m)\\.)?(youtube\\.com)\\/(?:(playlist|watch))(.*)?((\\?|\\&)list=)/\r\n\r\nexport function validate(url : string): boolean{\r\n    if(!url.match(video_pattern)) return false\r\n    else return true\r\n}\r\n\r\nexport function validate_playlist(url : string): boolean{\r\n    if(!url.match(playlist_pattern)) return false\r\n    let Playlist_id = url.split('list=')[1].split('&')[0]\r\n    if(Playlist_id.length !== 34 || !Playlist_id.startsWith('PL')){\r\n        return false\r\n    }\r\n    return true\r\n}\r\n\r\nexport async function video_basic_info(url : string, cookie? : string){\r\n        if(!url.match(video_pattern)) throw new Error('This is not a YouTube URL')\r\n        let video_id : string;\r\n        if(url.includes('youtu.be/')) video_id = url.split('youtu.be/')[1].split('/')[0]\r\n        else if(url.includes('youtube.com/embed/')) video_id = url.split('youtube.com/embed/')[1].split('/')[0]\r\n        else video_id = url.split('watch?v=')[1].split('&')[0];\r\n        let new_url = 'https://www.youtube.com/watch?v=' + video_id\r\n        let body = await url_get(new_url, {\r\n            headers : (cookie) ? { 'cookie' : cookie } : {}\r\n        })\r\n        let player_response = JSON.parse(body.split(\"var ytInitialPlayerResponse = \")[1].split(\"}};\")[0] + '}}')\r\n        let initial_response = JSON.parse(body.split(\"var ytInitialData = \")[1].split(\"}};\")[0] + '}}')\r\n        let badge = initial_response.contents.twoColumnWatchNextResults.results.results.contents[1]?.videoSecondaryInfoRenderer?.owner?.videoOwnerRenderer?.badges && initial_response.contents.twoColumnWatchNextResults.results.results.contents[1]?.videoSecondaryInfoRenderer?.owner?.videoOwnerRenderer?.badges[0]\r\n        if(player_response.playabilityStatus.status === 'ERROR') throw new Error(`While getting info from url \\n  ${player_response.playabilityStatus.reason}`)\r\n        if(player_response.playabilityStatus.status === 'LOGIN_REQUIRED') throw new Error(`While getting info from url \\n  ${ player_response.playabilityStatus.reason || player_response.playabilityStatus.messages[0]}`)\r\n        let html5player =  'https://www.youtube.com' + body.split('\"jsUrl\":\"')[1].split('\"')[0]\r\n        let format = []\r\n        let vid = player_response.videoDetails\r\n        let microformat = player_response.microformat.playerMicroformatRenderer\r\n        let video_details = {\r\n            id : vid.videoId,\r\n            url : 'https://www.youtube.com/watch?v=' + vid.videoId,\r\n            title : vid.title,\r\n            description : vid.shortDescription,\r\n            durationInSec : vid.lengthSeconds,\r\n            durationRaw : parseSeconds(vid.lengthSeconds),\r\n            uploadedDate : microformat.publishDate,\r\n            thumbnail : vid.thumbnail.thumbnails[vid.thumbnail.thumbnails.length - 1],\r\n            channel : {\r\n                name : vid.author,\r\n                id : vid.channelId,\r\n                url : `https://www.youtube.com/channel/${vid.channelId}`,\r\n                verified : Boolean(badge?.metadataBadgeRenderer?.style?.toLowerCase().includes('verified'))\r\n            },\r\n            views : vid.viewCount,\r\n            tags : vid.keywords,\r\n            averageRating : vid.averageRating,\r\n            live : vid.isLiveContent,\r\n            private : vid.isPrivate\r\n        }\r\n        if(!video_details.live) format.push(player_response.streamingData.formats[0])\r\n        format.push(...player_response.streamingData.adaptiveFormats)\r\n        let LiveStreamData = {\r\n            isLive : video_details.live,\r\n            dashManifestUrl : (player_response.streamingData?.dashManifestUrl) ? player_response.streamingData?.dashManifestUrl : null,\r\n            hlsManifestUrl : (player_response.streamingData?.hlsManifestUrl) ? player_response.streamingData?.hlsManifestUrl : null\r\n        }\r\n        return {\r\n            LiveStreamData,\r\n            html5player,\r\n            format,\r\n            video_details\r\n        }\r\n}\r\n\r\nfunction parseSeconds(seconds : number): string {\r\n    let d = Number(seconds);\r\n    var h = Math.floor(d / 3600);\r\n    var m = Math.floor(d % 3600 / 60);\r\n    var s = Math.floor(d % 3600 % 60);\r\n\r\n    var hDisplay = h > 0 ? (h < 10 ? `0${h}` : h) + ':' : \"\";\r\n    var mDisplay = m > 0 ? (m < 10 ? `0${m}` : m) + ':' : \"00:\";\r\n    var sDisplay = s > 0 ? (s < 10 ? `0${s}` : s)  : \"00\";\r\n    return hDisplay + mDisplay + sDisplay; \r\n}\r\n\r\nexport async function video_info(url : string, cookie? : string) {\r\n    let data = await video_basic_info(url, cookie)\r\n    if(data.LiveStreamData.isLive === true && data.LiveStreamData.hlsManifestUrl !== null){\r\n        return data\r\n    }\r\n    else if(data.format[0].signatureCipher || data.format[0].cipher){\r\n        data.format = await format_decipher(data.format, data.html5player)\r\n        return data\r\n    } \r\n    else {\r\n        return data\r\n    }\r\n}\r\n\r\nexport async function playlist_info(url : string, parseIncomplete : boolean = false) {\r\n    if (!url || typeof url !== \"string\") throw new Error(`Expected playlist url, received ${typeof url}!`);\r\n    if(url.search('(\\\\?|\\\\&)list\\\\=') === -1) throw new Error('This is not a PlayList URL')\r\n\r\n    let Playlist_id = url.split('list=')[1].split('&')[0]\r\n    if(Playlist_id.length !== 34 || !Playlist_id.startsWith('PL')) throw new Error('This is not a PlayList URL')\r\n    let new_url = `https://www.youtube.com/playlist?list=${Playlist_id}`\r\n    \r\n    let body = await url_get(new_url)\r\n    let response = JSON.parse(body.split(\"var ytInitialData = \")[1].split(\";</script>\")[0])\r\n    if(response.alerts){ \r\n        if(response.alerts[0].alertWithButtonRenderer?.type === 'INFO') {\r\n            if(!parseIncomplete) throw new Error(`While parsing playlist url\\n   ${response.alerts[0].alertWithButtonRenderer.text.simpleText}`)\r\n        }\r\n        else if(response.alerts[0].alertRenderer?.type === 'ERROR') throw new Error(`While parsing playlist url\\n   ${response.alerts[0].alertRenderer.text.runs[0].text}`)\r\n        else throw new Error('While parsing playlist url\\n Unknown Playlist Error')\r\n    }\r\n\r\n    let rawJSON = `${body.split('{\"playlistVideoListRenderer\":{\"contents\":')[1].split('}],\"playlistId\"')[0]}}]`;\r\n    let parsed = JSON.parse(rawJSON);\r\n    let playlistDetails = JSON.parse(body.split('{\"playlistSidebarRenderer\":')[1].split(\"}};</script>\")[0]).items;\r\n\r\n    let API_KEY = body.split('INNERTUBE_API_KEY\":\"')[1]?.split('\"')[0] ?? body.split('innertubeApiKey\":\"')[1]?.split('\"')[0] ?? DEFAULT_API_KEY;\r\n    let videos = getPlaylistVideos(parsed, 100);\r\n\r\n    let data = playlistDetails[0].playlistSidebarPrimaryInfoRenderer;\r\n    if (!data.title.runs || !data.title.runs.length) return undefined;\r\n\r\n    let author = playlistDetails[1]?.playlistSidebarSecondaryInfoRenderer.videoOwner;\r\n    let views = data.stats.length === 3 ? data.stats[1].simpleText.replace(/[^0-9]/g, \"\") : 0;\r\n    let lastUpdate = data.stats.find((x: any) => \"runs\" in x && x[\"runs\"].find((y: any) => y.text.toLowerCase().includes(\"last update\")))?.runs.pop()?.text ?? null;\r\n    let videosCount = data.stats[0].runs[0].text.replace(/[^0-9]/g, \"\") || 0;\r\n\r\n    let res = new PlayList({\r\n        continuation: {\r\n            api: API_KEY,\r\n            token: getContinuationToken(parsed),\r\n            clientVersion: body.split('\"INNERTUBE_CONTEXT_CLIENT_VERSION\":\"')[1]?.split('\"')[0] ?? body.split('\"innertube_context_client_version\":\"')[1]?.split('\"')[0] ?? \"<some version>\"\r\n        },\r\n        id: data.title.runs[0].navigationEndpoint.watchEndpoint.playlistId,\r\n        title: data.title.runs[0].text,\r\n        videoCount: parseInt(videosCount) || 0,\r\n        lastUpdate: lastUpdate,\r\n        views: parseInt(views) || 0,\r\n        videos: videos,\r\n        url: `https://www.youtube.com/playlist?list=${data.title.runs[0].navigationEndpoint.watchEndpoint.playlistId}`,\r\n        link: `https://www.youtube.com${data.title.runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url}`,\r\n        author: author\r\n            ? {\r\n                  name: author.videoOwnerRenderer.title.runs[0].text,\r\n                  id: author.videoOwnerRenderer.title.runs[0].navigationEndpoint.browseEndpoint.browseId,\r\n                  url: `https://www.youtube.com${author.videoOwnerRenderer.navigationEndpoint.commandMetadata.webCommandMetadata.url || author.videoOwnerRenderer.navigationEndpoint.browseEndpoint.canonicalBaseUrl}`,\r\n                  icon: author.videoOwnerRenderer.thumbnail.thumbnails.length ? author.videoOwnerRenderer.thumbnail.thumbnails[author.videoOwnerRenderer.thumbnail.thumbnails.length - 1].url : null\r\n              }\r\n            : {},\r\n        thumbnail: data.thumbnailRenderer.playlistVideoThumbnailRenderer?.thumbnail.thumbnails.length ? data.thumbnailRenderer.playlistVideoThumbnailRenderer.thumbnail.thumbnails[data.thumbnailRenderer.playlistVideoThumbnailRenderer.thumbnail.thumbnails.length - 1].url : null\r\n    });\r\n    return res;\r\n}\r\n\r\nexport function getPlaylistVideos(data:any, limit : number = Infinity) : Video[] {\r\n    const videos = [];\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n        if (limit === videos.length) break;\r\n        const info = data[i].playlistVideoRenderer;\r\n        if (!info || !info.shortBylineText) continue;\r\n\r\n        videos.push(\r\n            new Video({\r\n                id: info.videoId,\r\n                index: parseInt(info.index?.simpleText) || 0,\r\n                duration: parseDuration(info.lengthText?.simpleText) || 0,\r\n                duration_raw: info.lengthText?.simpleText ?? \"0:00\",\r\n                thumbnail: {\r\n                    id: info.videoId,\r\n                    url: info.thumbnail.thumbnails[info.thumbnail.thumbnails.length - 1].url,\r\n                    height: info.thumbnail.thumbnails[info.thumbnail.thumbnails.length - 1].height,\r\n                    width: info.thumbnail.thumbnails[info.thumbnail.thumbnails.length - 1].width\r\n                },\r\n                title: info.title.runs[0].text,\r\n                channel: {\r\n                    id: info.shortBylineText.runs[0].navigationEndpoint.browseEndpoint.browseId || undefined,\r\n                    name: info.shortBylineText.runs[0].text || undefined,\r\n                    url: `https://www.youtube.com${info.shortBylineText.runs[0].navigationEndpoint.browseEndpoint.canonicalBaseUrl || info.shortBylineText.runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url}`,\r\n                    icon: undefined\r\n                }\r\n            })\r\n        );\r\n    }\r\n    return videos   \r\n}\r\n\r\nfunction parseDuration(duration: string): number {\r\n    duration ??= \"0:00\";\r\n    const args = duration.split(\":\");\r\n    let dur = 0;\r\n\r\n    switch (args.length) {\r\n        case 3:\r\n            dur = parseInt(args[0]) * 60 * 60 + parseInt(args[1]) * 60 + parseInt(args[2]);\r\n            break;\r\n        case 2:\r\n            dur = parseInt(args[0]) * 60 + parseInt(args[1]);\r\n            break;\r\n        default:\r\n            dur = parseInt(args[0]);\r\n    }\r\n\r\n    return dur;\r\n}\r\n\r\n\r\nexport function getContinuationToken(data:any): string {\r\n    const continuationToken = data.find((x: any) => Object.keys(x)[0] === \"continuationItemRenderer\")?.continuationItemRenderer.continuationEndpoint?.continuationCommand?.token;\r\n    return continuationToken;\r\n}"]}